{"ast":null,"code":"const BASE = \"http://localhost:8080\";\nexport function getToken() {\n  return localStorage.getItem(\"token\");\n}\nexport async function api(path, options = {}) {\n  const token = getToken();\n  const headers = options.headers || {};\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\n  if (!headers[\"Content-Type\"] && options.method && options.method !== \"GET\") {\n    headers[\"Content-Type\"] = \"application/json\";\n  }\n  const res = await fetch(`${BASE}${path}`, {\n    ...options,\n    headers\n  });\n\n  // handle errors cleanly\n  if (!res.ok) {\n    const txt = await res.text();\n    throw new Error(txt || `HTTP ${res.status}`);\n  }\n\n  // if empty body\n  const contentType = res.headers.get(\"content-type\") || \"\";\n  if (!contentType.includes(\"application/json\")) return null;\n  return res.json();\n}","map":{"version":3,"names":["BASE","getToken","localStorage","getItem","api","path","options","token","headers","method","res","fetch","ok","txt","text","Error","status","contentType","get","includes","json"],"sources":["C:/reactpro/keysight/flightjavaconnect/src/api.js"],"sourcesContent":["const BASE = \"http://localhost:8080\";\r\n\r\nexport function getToken() {\r\n  return localStorage.getItem(\"token\");\r\n}\r\n\r\nexport async function api(path, options = {}) {\r\n  const token = getToken();\r\n  const headers = options.headers || {};\r\n\r\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\r\n  if (!headers[\"Content-Type\"] && options.method && options.method !== \"GET\") {\r\n    headers[\"Content-Type\"] = \"application/json\";\r\n  }\r\n\r\n  const res = await fetch(`${BASE}${path}`, { ...options, headers });\r\n\r\n  // handle errors cleanly\r\n  if (!res.ok) {\r\n    const txt = await res.text();\r\n    throw new Error(txt || `HTTP ${res.status}`);\r\n  }\r\n\r\n  // if empty body\r\n  const contentType = res.headers.get(\"content-type\") || \"\";\r\n  if (!contentType.includes(\"application/json\")) return null;\r\n  return res.json();\r\n}"],"mappings":"AAAA,MAAMA,IAAI,GAAG,uBAAuB;AAEpC,OAAO,SAASC,QAAQA,CAAA,EAAG;EACzB,OAAOC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;AACtC;AAEA,OAAO,eAAeC,GAAGA,CAACC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EAC5C,MAAMC,KAAK,GAAGN,QAAQ,CAAC,CAAC;EACxB,MAAMO,OAAO,GAAGF,OAAO,CAACE,OAAO,IAAI,CAAC,CAAC;EAErC,IAAID,KAAK,EAAEC,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUD,KAAK,EAAE;EACvD,IAAI,CAACC,OAAO,CAAC,cAAc,CAAC,IAAIF,OAAO,CAACG,MAAM,IAAIH,OAAO,CAACG,MAAM,KAAK,KAAK,EAAE;IAC1ED,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;EAC9C;EAEA,MAAME,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGX,IAAI,GAAGK,IAAI,EAAE,EAAE;IAAE,GAAGC,OAAO;IAAEE;EAAQ,CAAC,CAAC;;EAElE;EACA,IAAI,CAACE,GAAG,CAACE,EAAE,EAAE;IACX,MAAMC,GAAG,GAAG,MAAMH,GAAG,CAACI,IAAI,CAAC,CAAC;IAC5B,MAAM,IAAIC,KAAK,CAACF,GAAG,IAAI,QAAQH,GAAG,CAACM,MAAM,EAAE,CAAC;EAC9C;;EAEA;EACA,MAAMC,WAAW,GAAGP,GAAG,CAACF,OAAO,CAACU,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE;EACzD,IAAI,CAACD,WAAW,CAACE,QAAQ,CAAC,kBAAkB,CAAC,EAAE,OAAO,IAAI;EAC1D,OAAOT,GAAG,CAACU,IAAI,CAAC,CAAC;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"const BASE = \"\"; // since you have proxy in package.json\n\nexport async function api(path, options = {}) {\n  const token = localStorage.getItem(\"token\");\n  const headers = options.headers ? {\n    ...options.headers\n  } : {};\n\n  // ✅ DO NOT attach token for login/register\n  const isAuthEndpoint = path.startsWith(\"/auth/\");\n  if (token && !isAuthEndpoint) {\n    headers[\"Authorization\"] = `Bearer ${token}`;\n  }\n  if (options.body && !headers[\"Content-Type\"]) {\n    headers[\"Content-Type\"] = \"application/json\";\n  }\n  const res = await fetch(`${BASE}${path}`, {\n    ...options,\n    headers\n  });\n  if (!res.ok) {\n    const txt = await res.text();\n    throw new Error(txt || `HTTP ${res.status}`);\n    ;\n  }\n  const ct = res.headers.get(\"content-type\") || \"\";\n  if (!ct.includes(\"application/json\")) return null;\n  return res.json();\n}","map":{"version":3,"names":["BASE","api","path","options","token","localStorage","getItem","headers","isAuthEndpoint","startsWith","body","res","fetch","ok","txt","text","Error","status","ct","get","includes","json"],"sources":["C:/reactpro/keysight/flightjavaconnect/src/api.js"],"sourcesContent":["const BASE = \"\"; // since you have proxy in package.json\r\n\r\nexport async function api(path, options = {}) {\r\n  const token = localStorage.getItem(\"token\");\r\n  const headers = options.headers ? { ...options.headers } : {};\r\n\r\n  // ✅ DO NOT attach token for login/register\r\n  const isAuthEndpoint = path.startsWith(\"/auth/\");\r\n  if (token && !isAuthEndpoint) {\r\n    headers[\"Authorization\"] = `Bearer ${token}`;\r\n  }\r\n\r\n  if (options.body && !headers[\"Content-Type\"]) {\r\n    headers[\"Content-Type\"] = \"application/json\";\r\n  }\r\n\r\n  const res = await fetch(`${BASE}${path}`, { ...options, headers });\r\n\r\n  if (!res.ok) {\r\n    const txt = await res.text();\r\n    throw new Error(txt || `HTTP ${res.status}`);;\r\n  }\r\n\r\n  const ct = res.headers.get(\"content-type\") || \"\";\r\n  if (!ct.includes(\"application/json\")) return null;\r\n  return res.json();\r\n}"],"mappings":"AAAA,MAAMA,IAAI,GAAG,EAAE,CAAC,CAAC;;AAEjB,OAAO,eAAeC,GAAGA,CAACC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EAC5C,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMC,OAAO,GAAGJ,OAAO,CAACI,OAAO,GAAG;IAAE,GAAGJ,OAAO,CAACI;EAAQ,CAAC,GAAG,CAAC,CAAC;;EAE7D;EACA,MAAMC,cAAc,GAAGN,IAAI,CAACO,UAAU,CAAC,QAAQ,CAAC;EAChD,IAAIL,KAAK,IAAI,CAACI,cAAc,EAAE;IAC5BD,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUH,KAAK,EAAE;EAC9C;EAEA,IAAID,OAAO,CAACO,IAAI,IAAI,CAACH,OAAO,CAAC,cAAc,CAAC,EAAE;IAC5CA,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;EAC9C;EAEA,MAAMI,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGZ,IAAI,GAAGE,IAAI,EAAE,EAAE;IAAE,GAAGC,OAAO;IAAEI;EAAQ,CAAC,CAAC;EAElE,IAAI,CAACI,GAAG,CAACE,EAAE,EAAE;IACX,MAAMC,GAAG,GAAG,MAAMH,GAAG,CAACI,IAAI,CAAC,CAAC;IAC5B,MAAM,IAAIC,KAAK,CAACF,GAAG,IAAI,QAAQH,GAAG,CAACM,MAAM,EAAE,CAAC;IAAC;EAC/C;EAEA,MAAMC,EAAE,GAAGP,GAAG,CAACJ,OAAO,CAACY,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE;EAChD,IAAI,CAACD,EAAE,CAACE,QAAQ,CAAC,kBAAkB,CAAC,EAAE,OAAO,IAAI;EACjD,OAAOT,GAAG,CAACU,IAAI,CAAC,CAAC;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}